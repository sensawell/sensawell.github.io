import{u as E,a as A}from"./vm-CQ5bVH42.js";import{q as L,s as R,k as i,v as k,r as x,j as G,c as N,o as _,w as C,u as H,e as l,a as f,i as T,t as B,p as O,d as D,h as I}from"./index-7MxBQUbU.js";import{h as W}from"./render-ceMtRdhF.js";import{Q}from"./QIcon-CuGiGo4w.js";import{Q as J}from"./QImg-D6nkdLWC.js";import{Q as K}from"./QCardSection-B_O3W9Cs.js";import{Q as X}from"./QCard-bSbp6n7e.js";import{Q as Y}from"./QDialog-tV8PqpxX.js";import{Q as Z,u as ee}from"./user-CK5ue8In.js";import{u as te}from"./training-DILgfiWP.js";import{u as ae,a as re}from"./level-EiexdIPv.js";import{T as se}from"./TitleBar-BWfyP2zT.js";import{U as le}from"./UserBar-B8FlKWXK.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./scroll-DZpGkggT.js";import"./dom-C2AtZWFP.js";import"./pinia-y6n_ESuA.js";import"./vue-i18n-CHTY-zsR.js";const oe={...E,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean};function ie(e,u,c){return c<=u?u:Math.min(c,Math.max(u,e))}const $=50,z=2*$,V=z*Math.PI,ue=Math.round(V*1e3)/1e3,ce=L({name:"QCircularProgress",props:{...oe,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:u}){const{proxy:{$q:c}}=R(),P=A(e),g=i(()=>{const t=(c.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(c.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-t}deg)`:`rotate3d(0, 0, 1, ${t-90}deg)`}}),d=i(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),r=i(()=>z/(1-e.thickness/2)),m=i(()=>`${r.value/2} ${r.value/2} ${r.value} ${r.value}`),h=i(()=>ie(e.value,e.min,e.max)),p=i(()=>e.max-e.min),s=i(()=>e.thickness/2*r.value),v=i(()=>{const t=(e.max-h.value)/p.value,n=e.rounded===!0&&h.value<e.max&&t<.25?s.value/2*(1-t/.25):0;return V*t+n});function y({thickness:t,offset:n,color:S,cls:w,rounded:q}){return k("circle",{class:"q-circular-progress__"+w+(S!==void 0?` text-${S}`:""),style:d.value,fill:"transparent",stroke:"currentColor","stroke-width":t,"stroke-dasharray":ue,"stroke-dashoffset":n,"stroke-linecap":q,cx:r.value,cy:r.value,r:$})}return()=>{const t=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&t.push(k("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:$-s.value/2,cx:r.value,cy:r.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&t.push(y({cls:"track",thickness:s.value,offset:0,color:e.trackColor})),t.push(y({cls:"circle",thickness:s.value,offset:v.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const n=[k("svg",{class:"q-circular-progress__svg",style:g.value,viewBox:m.value,"aria-hidden":"true"},t)];return e.showValue===!0&&n.push(k("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},u.default!==void 0?u.default():[k("div",h.value)])),k("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:P.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:h.value},W(u.internal,n))}}}),de={id:"q-app",style:{"min-height":"100vh"}},me={class:"cardProgress column items-center justify-center"},ve={class:"q-my-lg time"},fe={class:"text-white q-my-sm column items-center justify-center"},ge={class:"q-my-lg currentDay"},he={class:"cardButtons column items-center justify-center"},ye={key:0,class:"full-width row justify-center"},ke={key:1},pe={__name:"trainingPage",setup(e){const{levelImage:u}=ae(),c=re(),P=H(),{currentDayToBeCompleated:g}=te(),d=x(100),r=x(!1),m=x(!1),h=x("blur(4px) saturate(150%)"),p=i(()=>ee());let s=null;const v=x(!1);let y=0,t=null,n=0;function S(o){s&&clearInterval(s);const a=Number(o);if(!isFinite(a)||a<=0){d.value=0;return}n=a*6e4,t=Date.now(),y=0,d.value=100,s=setInterval(w,1e3)}function w(){const o=Date.now()-t+y,a=Math.max(0,100-o/n*100);d.value=Number(a.toFixed(0)),o>=n&&(clearInterval(s),s=null,d.value=0,M())}function q(){!r.value&&!s&&!v.value||(v.value?(r.value=!0,t=Date.now(),v.value=!1,s=setInterval(w,1e3)):(clearInterval(s),y+=Date.now()-t,v.value=!0))}const F=()=>{const o=g?.value?.time;S(o),r.value=!0},M=()=>{const o=g.value;o&&(c.updateTraining(o.id,!0),m.value=!0)},j=()=>{P.push("/progress")},U=i(()=>r.value&&!v.value&&!m.value);return G(()=>{p.value&&p.value.loadUserData(),c&&c.loadTrainings()}),(o,a)=>(_(),N(Z,{style:{width:"100%"}},{default:C(()=>[l("div",de,[f(se,{title:"Entrenamiento"}),f(le,{class:"userBar",userName:p.value?.getUserName,userLevel:"Nivel",levelImage:T(u)},null,8,["userName","levelImage"]),l("div",me,[l("div",ve,B(T(g)?.time)+"'",1),a[4]||(a[4]=l("div",null,"Pedaleando",-1)),f(ce,{value:d.value,size:"160px",thickness:.4,color:"#D6FF60","track-color":"grey",class:"q-ma-md","show-value":"","font-size":"20px",reverse:""},{default:C(()=>[l("span",{class:O(["progress-value",U.value?"fade-pulse":""])},B(d.value)+"%",3)]),_:1},8,["value"]),l("div",fe,[l("div",null,B(m.value?"¡Has completado!!!":"Estás completando:"),1),l("div",ge,"Día "+B(T(g)?.name),1)])]),l("div",he,[m.value?(_(),D("div",ke,"Entrenamiento completado")):(_(),D("div",ye,[r.value?(_(),N(Q,{key:1,size:"40px",name:v.value?"mdi-play":"mdi-pause",onClick:a[1]||(a[1]=b=>q())},null,8,["name"])):(_(),N(Q,{key:0,size:"40px",name:"mdi-play",onClick:a[0]||(a[0]=b=>F())}))]))])]),f(Y,{persistent:"",modelValue:m.value,"onUpdate:modelValue":a[3]||(a[3]=b=>m.value=b),"backdrop-filter":h.value},{default:C(()=>[f(X,{class:"finishDialog column justify-center items-center q-pb-lg"},{default:C(()=>[f(K,{class:"row justify-center items-center"},{default:C(()=>[f(J,{src:"/mini-bike-app/img/checkit.svg",alt:"Completado",width:"160px"}),a[5]||(a[5]=l("div",{class:"text-h6 text-center text-white q-my-lg"},[I(" ¡Felicidades!"),l("br"),I("Entrenamiento completado ")],-1)),l("div",null,[l("div",{class:"linkText",onClick:a[2]||(a[2]=b=>j())},"Ver progreso")])]),_:1})]),_:1})]),_:1},8,["modelValue","backdrop-filter"])]),_:1}))}},Me=ne(pe,[["__scopeId","data-v-2ee2ba5c"]]);export{Me as default};
